<project name="eMagine" basedir=".">
	<taskdef 
		name="hibernatetool" 
		classname="org.hibernate.tool.ant.HibernateToolTask">
		<classpath>
			<fileset dir="WebContent/WEB-INF/lib">
				<include name="**/*.jar"/>
			</fileset>
		</classpath>
		
	</taskdef>
	
	<taskdef 
			name="middlegen" 
			classname="middlegen.MiddlegenTask">
			<classpath>
						<fileset dir="WebContent/WEB-INF/lib">
							<include name="**/*.jar"/>
						</fileset>
						<fileset dir="ressources/middleware/lib/">
							<include name="**/*.jar"/>
					</fileset>
			</classpath>
	</taskdef>
			
		
	<target name="CreateSchema"
			description="Export le schema et créer la base de donneés">

		<hibernatetool destdir=".deployables\eMagine\WEB-INF\classes" classpath=".deployables\eMagine\WEB-INF\classes" >
			<annotationconfiguration configurationfile="JavaSource/fr/umlv/ir3/emagine/util/hibernate.cfg.xml"/>
			<hbm2ddl export="true" console="true" drop="true" create="true" 
				outputfilename="hibernate.ddl" delimiter=";"/>
		</hibernatetool>
	</target>
	
	<target name="ViewSchema" depends="CreateSchema">
		<middlegen appname = "eMagine" gui="true"
				databaseurl="jdbc:postgresql://server.srv-net.com:54321/eMagine"
				driver="org.postgresql.Driver"
				username="eMagine"
				password="eMagine"
				schema="public">
		</middlegen>
	</target>
	
</project>

